// import{c as a}from"./chunk-JHVW6NMQ.js";import{a as i}from"./chunk-6UBWOGX3.js";import"./chunk-FSZRLV7Q.js";var n=class{constructor(){this.messageBuffer=[];this.mode="buffering";window.addEventListener("message",({data:e})=>{e.type===a.SANDBOX_INITIALIZED&&this.handleSandboxInitialization()}),this.checkSandboxInitialization()}setExperimentTreatment(e){this.sendMessage({type:a.SET_EXPERIMENT_TREATMENT,payload:e})}trackPage(e){this.sendMessage({type:a.TRACK_PAGE,payload:e})}trackEvent(e){e.url||(e.url=location.pathname+location.search),this.sendMessage({type:a.TRACK_EVENT,payload:e})}handleSandboxInitialization(){let e=this.getIframeElement();e?(this.sandboxWindow=e.contentWindow,this.mode="passthrough",this.flushBuffer()):i.error("Could not attach tracking properly")}sendMessage(e){this.sandboxWindow&&this.mode==="passthrough"?this.sandboxWindow.postMessage(e,"*"):(this.messageBuffer.push(e),this.checkSandboxInitialization())}checkSandboxInitialization(){if(this.sandboxWindow&&this.mode==="passthrough")return;let e=this.getIframeElement();e&&e.contentWindow.postMessage({type:a.CHECK_SANDBOX_INITIALIZATION,payload:{}})}getIframeElement(){return document.querySelector("iframe.TrackingSandbox")}flushBuffer(){this.messageBuffer.forEach(e=>{this.sendMessage(e)}),this.messageBuffer=[]}};var t=new n;var p={setExperimentTreatment:t.setExperimentTreatment.bind(t),trackPage:t.trackPage.bind(t),trackEvent:t.trackEvent.bind(t)};export{p as SiteTracking};

export const SiteTracking = {}
